<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Las Batallas del Rey David: Triunfos y Derrotas</title>
    <!-- Carga de Tailwind CSS para estilos r√°pidos y responsivos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de Chart.js para los gr√°ficos de datos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tinos:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lato', sans-serif;
            background-color: #EDF2F4; /* Gris muy claro */
        }
        h1, h2, h3 {
            font-family: 'Tinos', serif; /* Fuente m√°s cl√°sica para t√≠tulos */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 450px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        /* Estilos de la l√≠nea de tiempo */
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1px;
            top: 20px;
            bottom: -20px;
            width: 2px;
            background-color: #8D99AE; /* Gris azulado */
        }
        .timeline-item:last-child::before {
            display: none;
        }
        .timeline-dot {
            position: absolute;
            left: -8px;
            top: 20px;
            height: 18px;
            width: 18px;
            border-radius: 50%;
            background-color: #D90429; /* Rojo oscuro (Derrota/Pecado) */
            border: 3px solid #EDF2F4;
        }
    </style>
</head>
<body class="text-gray-800">
    <header class="bg-[#2B2D42] text-white p-8 text-center">
        <h1 class="text-4xl md:text-6xl font-bold mb-2">El Le√≥n de Jud√°</h1>
        <p class="text-lg md:text-xl text-[#8D99AE]">Una Historia Visual de las Batallas del Rey David</p>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        <section class="text-center mb-12">
            <h2 class="text-3xl font-bold text-[#2B2D42] mb-4">"Bendice, alma m√≠a, a Jehov√°, y no olvides ninguno de sus beneficios."</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600">El Salmo 103, atribuido a David, refleja una vida de batallas, tanto en el campo como en el esp√≠ritu. Esta es la historia de sus grandes triunfos militares, sus dolorosas derrotas y la fe inquebrantable que defini√≥ su reinado, un legado de un guerrero perdonado y exaltado.</p>
        </section>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Bloque 1: Victoria contra Goliat -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-2xl font-bold text-[#2B2D42] mb-4">El Pastor Guerrero: La Victoria contra Goliat</h3>
                <p class="mb-6 text-gray-700">La primera y m√°s emblem√°tica victoria de David no fue como rey, sino como un joven pastor. Su fe, no su fuerza, fue su arma principal. Este enfrentamiento estableci√≥ el patr√≥n para su futuro militar: la confianza en Dios por encima de la superioridad num√©rica o armament√≠stica.</p>
                <div class="flex justify-around items-center text-center">
                    <div class="w-1/2">
                        <span class="text-6xl text-[#EF233C]">ü™®</span>
                        <h4 class="text-xl font-bold mt-2">David</h4>
                        <p class="text-sm text-gray-600">Una honda y cinco piedras lisas</p>
                    </div>
                    <div class="w-1/2">
                         <span class="text-6xl text-[#8D99AE]">üõ°Ô∏è</span>
                        <h4 class="text-xl font-bold mt-2">Goliat</h4>
                        <p class="text-sm text-gray-600">Armadura de bronce y lanza de hierro</p>
                    </div>
                </div>
            </div>

            <!-- Bloque 2: Gr√°fico de Victorias Clave -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-2xl font-bold text-[#2B2D42] mb-4">Ascenso al Poder: Victorias Clave</h3>
                 <p class="mb-4 text-gray-700">Una vez ungido rey, David lider√≥ una serie de campa√±as militares decisivas que expandieron y aseguraron las fronteras de Israel. Este gr√°fico muestra la escala estimada de sus victorias clave, consolidando su dominio en la regi√≥n.</p>
                <div class="chart-container">
                    <canvas id="victoriesChart"></canvas>
                </div>
            </div>

            <!-- Bloque 3: La Gran Derrota (Timeline) -->
            <div class="md:col-span-2 bg-white rounded-lg shadow-md p-6">
                <h3 class="text-2xl font-bold text-[#2B2D42] mb-4 text-center">La Gran Derrota: El Pecado y la Rebeli√≥n</h3>
                <p class="max-w-4xl mx-auto text-center mb-8 text-gray-700">La derrota m√°s significativa de David no fue contra un ej√©rcito extranjero, sino contra s√≠ mismo. Su pecado con Betsab√© y el asesinato de Ur√≠as desencaden√≥ una cadena de tragedias familiares, culminando en la devastadora guerra civil liderada por su propio hijo, Absal√≥n.</p>
                <div class="relative pl-8">
                    <div class="timeline-item relative pb-8">
                        <div class="timeline-dot"></div>
                        <h4 class="font-bold text-lg text-[#D90429]">Pecado con Betsab√©</h4>
                        <p class="text-gray-600">David comete adulterio y orquesta la muerte de Ur√≠as. Este acto de traici√≥n personal fractura su autoridad moral.</p>
                    </div>
                    <div class="timeline-item relative pb-8">
                        <div class="timeline-dot"></div>
                        <h4 class="font-bold text-lg text-[#D90429]">La Profec√≠a de Nat√°n</h4>
                        <p class="text-gray-600">El profeta Nat√°n confronta a David, anunciando que "la espada no se apartar√° jam√°s de tu casa".</p>
                    </div>
                    <div class="timeline-item relative pb-8">
                        <div class="timeline-dot"></div>
                        <h4 class="font-bold text-lg text-[#D90429]">Rebeli√≥n de Absal√≥n</h4>
                        <p class="text-gray-600">Absal√≥n, su hijo, capitaliza el descontento y se proclama rey en Hebr√≥n, forzando a David a huir de Jerusal√©n.</p>
                    </div>
                     <div class="timeline-item relative pb-0">
                        <div class="timeline-dot"></div>
                        <h4 class="font-bold text-lg text-[#D90429]">Batalla y P√©rdida</h4>
                        <p class="text-gray-600">Los ej√©rcitos de David derrotan a los rebeldes, pero Absal√≥n es asesinado, sumiendo al rey en un profundo dolor. Una victoria militar que se sinti√≥ como una derrota personal devastadora.</p>
                    </div>
                </div>
            </div>

            <!-- Bloque 4: Gr√°fico de Consolidaci√≥n -->
            <div class="bg-white rounded-lg shadow-md p-6">
                <h3 class="text-2xl font-bold text-[#2B2D42] mb-4">Redenci√≥n y Consolidaci√≥n</h3>
                <p class="mb-4 text-gray-700">A pesar de la tragedia, David se arrepinti√≥ y recuper√≥ el trono. Sus √∫ltimos a√±os se dedicaron a consolidar el reino, reprimir revueltas y preparar el camino para la construcci√≥n del Templo bajo el reinado de su hijo Salom√≥n. El reino unificado fue su mayor triunfo militar y pol√≠tico.</p>
                <div class="chart-container">
                    <canvas id="kingdomChart"></canvas>
                </div>
            </div>
            
            <!-- Bloque 5: Legado Num√©rico -->
            <div class="bg-white rounded-lg shadow-md p-6 flex flex-col justify-center">
                 <h3 class="text-2xl font-bold text-[#2B2D42] mb-6 text-center">El Legado de un Rey Guerrero</h3>
                 <div class="grid grid-cols-2 gap-6 text-center">
                     <div>
                         <p class="text-4xl font-bold text-[#EF233C]">40</p>
                         <p class="text-gray-600">A√±os de Reinado</p>
                     </div>
                     <div>
                         <p class="text-4xl font-bold text-[#EF233C]">7</p>
                         <p class="text-gray-600">A√±os reinando en Hebr√≥n</p>
                     </div>
                     <div>
                         <p class="text-4xl font-bold text-[#EF233C]">33</p>
                         <p class="text-gray-600">A√±os reinando en Jerusal√©n</p>
                     </div>
                     <div>
                         <p class="text-4xl font-bold text-[#EF233C]">>12</p>
                         <p class="text-gray-600">Naciones Sometidas</p>
                     </div>
                 </div>
            </div>
        </div>
    </main>

    <footer class="bg-[#2B2D42] text-white text-center p-4 mt-8">
        <p class="text-sm text-[#8D99AE]">&copy; 2025 Lienzo de Datos. Todos los derechos reservados.</p>
    </footer>

    <script>
        // Asegura que el c√≥digo se ejecute solo cuando el DOM est√© completamente cargado.
        document.addEventListener('DOMContentLoaded', function() {
            // Funci√≥n para dividir las etiquetas de los gr√°ficos en varias l√≠neas si son demasiado largas.
            const wrapLabel = (label) => {
                const maxLength = 16;
                if (label.length <= maxLength) return label;
                const words = label.split(' ');
                const lines = [];
                let currentLine = '';
                words.forEach(word => {
                    if ((currentLine + ' ' + word).trim().length > maxLength) {
                        lines.push(currentLine.trim());
                        currentLine = word;
                    } else {
                        currentLine = (currentLine + ' ' + word).trim();
                    }
                });
                if (currentLine) lines.push(currentLine);
                return lines;
            };

            // Funci√≥n de callback para Tooltip de Chart.js para mostrar etiquetas completas
            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                return Array.isArray(label) ? label.join(' ') : label;
            };
            
            // Datos para el gr√°fico de barras de Victorias
            const victoriesData = {
                labels: ['Filisteos en el Valle de Refaim', 'Moabitas', 'Hadadezer de Soba', 'Edomitas en el Valle de la Sal', 'Amonitas y Arameos'].map(wrapLabel),
                datasets: [{
                    label: 'Escala de la Victoria (Estimada)',
                    data: [8, 6, 7, 9, 10], // Escala arbitraria de 1 a 10
                    backgroundColor: '#EF233C', // Rojo claro (Victoria)
                    borderColor: '#D90429',
                    borderWidth: 1
                }]
            };

            // Configuraci√≥n del gr√°fico de barras
            const victoriesConfig = {
                type: 'bar',
                data: victoriesData,
                options: {
                    indexAxis: 'y', // Hace las barras horizontales
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Impacto Hist√≥rico (Escala 1-10)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                title: tooltipTitleCallback
                            }
                        }
                    }
                }
            };

            // Inicializaci√≥n del gr√°fico de Victorias
            new Chart(
                document.getElementById('victoriesChart'),
                victoriesConfig
            );

            // Datos para el gr√°fico de Donut de Composici√≥n del Reino
            const kingdomData = {
                labels: ['Tribu de Jud√°', 'Tribus del Norte (Israel)', 'Territorios Conquistados (Edom, Moab, Am√≥n)', 'Reinos Vasallos (Soba, Damasco)'].map(wrapLabel),
                datasets: [{
                    label: 'Composici√≥n del Reino Unificado',
                    data: [40, 35, 15, 10], // Porcentajes estimados
                    backgroundColor: ['#2B2D42', '#8D99AE', '#EF233C', '#D90429'],
                    hoverOffset: 4
                }]
            };

            // Configuraci√≥n del gr√°fico de Donut
            const kingdomConfig = {
                type: 'doughnut',
                data: kingdomData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                            callbacks: {
                                title: tooltipTitleCallback,
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + '%';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            };

            // Inicializaci√≥n del gr√°fico del Reino
            new Chart(
                document.getElementById('kingdomChart'),
                kingdomConfig
            );
        });
    </script>
</body>
</html>
